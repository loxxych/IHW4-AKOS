# Клиника (альтернативные синхропримитивы, 9 баллов)

Вариант модели больницы, использующий условные переменные, барьер запуска и атомарный флаг завершения вместо семафоров. Программа сохраняет функциональность решения на 8 баллов (ввод через CLI и конфиг, генерация случайных данных, вывод в файл и консоль), но построена на других примитивах синхронизации.

## Отличия реализации
- Очереди пациентов сигнализируются через `pthread_cond_t`, а блокировка реализована мьютексами.
- Барьер `pthread_barrier_t` запускает дежурных врачей и специалистов синхронно перед приёмом пациентов.
- Завершение по `SIGINT` хранится в `atomic_bool`, а ожидания на условных переменных используют таймауты, чтобы корректно реагировать на остановку.

## Сборка
```bash
make
```

## Запуск
```bash
./clinic_alt --output out.txt [--seed N] [--random-config | --config FILE | <patients> <arr_min> <arr_max> <triage_min> <triage_max> <treat_min> <treat_max>]
```

### Примеры
- Явные параметры: `./clinic_alt --output sample_outputs/from_cli.txt 5 0 200 50 150 200 400`
- Конфигурационный файл: `./clinic_alt --output sample_outputs/from_file.txt --config configs/compact.txt --seed 7`
- Случайные данные: `./clinic_alt --output sample_outputs/randomized.txt --random-config --seed 42`

## Сравнительный анализ
Для проверки идентичности поведения с вариантом на семафорах (`clinic_io`) запущены обе программы с одинаковыми конфигурациями (`configs/compact.txt`, `configs/mixed.txt`, `configs/slow.txt`) и одинаковыми зернами (`--seed 7` и `--seed 42`). Наборы событий (приход пациентов, маршрутизация к специалистам, завершение приёмов) совпадают по данным и последовательности пациентов, расхождения возможны только в относительных временных задержках из-за планировщика.

Готовые логи запуска альтернативной версии находятся в `sample_outputs/` и могут быть сравнены с логами из `clinic_io/sample_outputs/` для подтверждения эквивалентности поведения.
